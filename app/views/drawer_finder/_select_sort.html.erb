<select data-controller="sort" name="sort">
  <% Rails.configuration.sorters.group_by { |sorter| sorter[:group] }.each do |group| %>
    <optgroup label="<%= group.first.to_s.gsub('_', ' ').capitalize %>">

      <% group.last.each do |sorter| %>
        <option <%= 'selected=selected' if params[:sort]&.to_sym == sorter[:value] %> value="<%= sorter[:value] %>"><%= sorter[:label] %></option>
      <% end %>

    </optgroup>

  <% end %>
</select>
